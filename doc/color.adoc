= Working with Color
James Elliott <james@deepsymmetry.org>
:icons: font

// Set up support for relative links on GitHub; add more conditions
// if you need to support other environments and extensions.
ifdef::env-github[:outfilesuffix: .adoc]

Cues that assign color to lights are designed to leverage the
https://github.com/jolby/colors[jolby/colors] library. In addition to
creating colors by name, as in the Usage examples, you can create them
by hex string, RGB values, and, most usefully when thinking about how to
mix and fade them, http://en.wikipedia.org/wiki/HSL_and_HSV[HSL] (Hue,
Saturation, and Lightness). So, if you wanted a cue that shifts back and
forth around yellow, and don't remember the hue value of yellow, you
could do something like this:

[source,clojure]
----
(use 'com.evocomputing.colors)
(def yellow (create-color "yellow"))
(def hue-param (oscillators/build-oscillated-param
  (oscillators/sine) :min (hue (adjust-hue yellow -5))
                     :max (hue (adjust-hue yellow 5))))
(show/add-effect! :color (global-color-effect
  (params/build-color-param :s 100 :l 50 :h hue-param)))
----

You can add lighten it up by changing to something like `:l 70` in the
`build-color-param` call, darken it a bunch with `:l 20` or desaturate
it a touch with `:s 80`... For more options and ideas, delve into the
colors library http://jolby.github.io/colors/[API documentation],
and the various <<oscillators#oscillators,oscillators>> that Afterglow
makes available to you.

Since working with colors is so fundamental to creating light shows,
the mechanism for creating <<parameters#color-parameters,dynamic color
parameters>> is very well developed, and worth getting familiar with.
You can often avoid having to write your own function entirely by
clever combinations of oscillated parameters for creating dynamic
color parameters.

### Thinking in Hue, Saturation, and Lightness

If you are not accustomed to working with colors in the HSL space, it
is definitely worth spending a little time becoming familiar with it,
because it is a powerful way of expressing relationships between
colors in ways that are visually sensible and pleasing. The
http://en.wikipedia.org/wiki/HSL_and_HSV[Wikipedia article] is a nice
reference, with diagrams. Please spend a little time reading it. This
is the way that Afterglow works with colors when it is fading
(blending) between them, and many of the sample cues and effects use
HSL relationships to achieve pretty and interesting results.

In a nutshell, a color in HSL is represented by three numbers:

Hue::

  Identifies a specific pure color, as an angle in degrees around the
  color wheel. Red is at 0, green is at 120, and blue at 240; values
  in between these are a linear mixture between the colors, and as the
  value increases towards 360 it returns to red.

Saturation::

  Specifies how pure the color is. A saturation of 100 means it is
  fully pure, while a saturation of 0 is completely achromatic (gray).

Lightness::

  Specifies how white the color is. A lightness value of 100 is pure
  white, while 0 is pure black. At these extremes the saturation can't
  affect the color, it is always achromatic anyway. A lightness of 50
  lets the color "be itself" when fully saturated. Lightnesses above
  fifty start to whiten it, while those below fifty blacken it.

### Modifying Colors

You can also create a variety of layered looks by building effects
that work with each other, rather than having to create a separate
effect for each combination. The discussion on
<<effects#layering-effects,layering effects>> explains how to do this
and points at a sample implementation that ships with Afterglow.

#### License

+++<a href="http://deepsymmetry.org"><img src="assets/DS-logo-bw-200-padded-left.png" align="right" alt="Deep Symmetry logo"></a>+++
Copyright Â© 2015 http://deepsymmetry.org[Deep Symmetry, LLC]

Distributed under the
http://opensource.org/licenses/eclipse-1.0.php[Eclipse Public License
1.0], the same as Clojure. By using this software in any fashion, you
are agreeing to be bound by the terms of this license. You must not
remove this notice, or any other, from this software. A copy of the
license can be found in
https://cdn.rawgit.com/brunchboy/afterglow/master/resources/public/epl-v10.html[resources/public/epl-v10.html]
within this project.
